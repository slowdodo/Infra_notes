# 만약 WAN이 다른 웹서버에 접속이 안된다면 반드시 따라하자

WAN이 다른 웹서버인 GOOGLE, naver, 이런곳에 접속이 안된다면은 체크를 해주자.

1. vmware와 ESXI의 설정이 의도했던 대로 흘러갔는가?

2. ESXI와 PFSENSE의 MAC주소가 다르지 않는가?

3. NIC을 다른걸 연결한건가?
    * VM에서 nic부분을 verbose하기

4. 게이트웨이가 잘 적용됐는가?
    * route -n 으로 확인

# pfsense 주의사항

`절대로 절대로` 최신버전은 다운받으면 안된다.

stable버전을 깔아야한다.

온갖 플러그인 이슈가 많아서 커뮤니티에서 직접 물어보며 테스터가되야된다.

나는 squidguard의 php 버전문제로 제대로 설치도 안되고 이리저리 꼬여서 아에 싹 갈아버렸다.

# LAN
LAN도 `반드시 웹서버에 접속되어야한다.`

반드시 접속되어야 방화벽설정부터 다른것까지 다 테스트 할수 있다.  
안된다면 무조건 하나하나 다 점검해서 해야된다.   
아니면은 갈아엎고 하거나 엄청나게 삽질해가며 환경을 맞춰줘야하는데 정말 어렵고 정보도 없어서 오래걸린다.  

트러블 슈팅 리스트라 한다면은  
1. vmware의 NIC설정
2. Vsphere의 VLAN ID가 4095인가?
3. WAN과 LAN의 맥주소가 바뀌지 않았는가?
4. NIC을 잘못연결했는가?
5. VM에 NIC을 연결한 어뎁터 유형이 VMXNET3이 맞나? 이다.

# 여담
이것들을 설정안하면 온갖거를 다 테스트해봐야하고 pfsense같은것도 다시 깔고 해야된다.
저것들떄문에 나도 몇일 고생했다.


# why pfsense는 WAN과 LAN을 사용하는가?

LAN은 기본적으로 WAN을통하여 밖으로 나갈수가 없게 설정되어있다. (물론 인터넷이 잘 안된다는것은 아니다.)

간단하게 LAN 자체는 외부로 소통이 안되는데 WAN을 통해서 나가고 들어올수있게 정책을 펼치는것이다. 그렇기에 기본적으로 LAN WAN 최소 2개는 가지고 있어야한다.